# Руководство: Умный продающий ассистент

## Что изменилось

Бот теперь - **профессиональный sales-ассистент**, который использует техники продаж для конверсии клиентов.

---

## Ключевые возможности

### 1. Lead Scoring (Оценка лидов)

Бот автоматически оценивает каждого клиента по шкале 0-10:

- **COLD (0-3)**: Холодный лид - только знакомится
- **WARM (4-6)**: Теплый лид - проявляет интерес
- **HOT (7-10)**: Горячий лид - готов к заказу

**Оценка учитывает:**
- Ключевые слова ("заказать", "купить", "цена")
- Намерение пользователя (pricing, services, order)
- Длину диалога
- Детальность вопросов

### 2. Адаптивные стратегии продаж

**Для холодных лидов:**
- Обучение ценности
- SPIN вопросы (Ситуация, Проблема, Последствия, Выгода)
- Показ экспертности
- Мягкие CTA

**Для теплых лидов:**
- Показ выгод и результатов
- Социальное доказательство (кейсы)
- Работа с сомнениями
- Средние CTA

**Для горячих лидов:**
- Закрытие на действие
- Убирание барьеров
- Создание срочности
- Сильные CTA

### 3. SPIN техника

**S - Situation (Ситуация):**
Бот задает вопросы о текущей ситуации клиента

**P - Problem (Проблема):**
Выявляет боли и проблемы

**I - Implication (Последствия):**
Усиливает боль, показывая последствия

**N - Need-payoff (Выгода):**
Показывает ценность решения

### 4. Работа с возражениями

**"Дорого":**
- Переключение на ценность и ROI
- Показ окупаемости

**"Подумаю":**
- Уточнение сомнений
- Предложение бесплатной консультации

**"Сравню с конкурентами":**
- Показ УТП
- Помощь в выборе

### 5. Универсальные CTA

Бот адаптирует призыв к действию под:
- Температуру лида
- Приоритет контакта (телефон, Telegram, email)
- Контекст диалога

---

## Технические детали

### Новые файлы

**`src/utils/lead_scoring.py`** - Система скоринга:
- `calculate_lead_score()` - оценка температуры
- `detect_funnel_stage()` - определение этапа воронки
- `get_lead_temperature_label()` - текстовая метка

### Измененные файлы

**`src/ai/prompts.py`** - Продающие промпты:
- Константы стратегий (COLD/WARM/HOT)
- `create_sales_chat_messages()` - создание продающего промпта
- `format_cta_options()` - универсальные CTA

**`src/bot/handlers/chat.py`** - Интеграция:
- Вызов `calculate_lead_score()` перед ответом
- Передача lead_score и funnel_stage в промпт

**`data/faq.json`** - Расширенная база:
- Кейсы успеха
- Ответы на возражения
- Примеры работ

---

## Примеры диалогов

### Холодный лид (Score: 2)

```
Клиент: Чем вы занимаетесь?

Бот: У нас три направления: консультации, разработка решений 
     и техподдержка. 
     
     Расскажите о вашем проекте - подберу оптимальный вариант. 
     Что сейчас хотите улучшить или автоматизировать?

[SPIN вопрос для выявления потребностей]
```

### Теплый лид (Score: 5)

```
Клиент: Сколько стоит консультация?

Бот: Консультация от 5000 руб/час. Но главное - это результат: 
     например, для клиента из ритейла одна консультация помогла 
     избежать ошибки на 200К руб.
     
     Хотите обсудить вашу задачу? Могу подготовить план - 
     напишите в Telegram @manager или позвоните +7 (999) 123-45-67

[Показ ценности + социальное доказательство + CTA]
```

### Горячий лид (Score: 8)

```
Клиент: Хочу заказать разработку

Бот: Отлично! Разработка от 50000 руб, срок от 2 недель. 
     
     Давайте начнем прямо сейчас:
     
     1. Позвоните +7 (999) 123-45-67 - менеджер на связи
     2. Или напишите в Telegram @manager - отвечу за 5 минут
     3. Запишитесь на бесплатную консультацию - есть слоты сегодня
     
     Какой вариант удобнее?

[Закрытие + конкретные шаги + варианты]
```

---

## Как тестировать

### Тест 1: Холодный лид
Отправьте: "Расскажите о компании"

**Ожидание:**
- Краткий ответ об услугах
- SPIN вопрос для выявления потребностей
- Мягкий CTA

### Тест 2: Теплый лид
Отправьте: "Сколько стоит разработка?"

**Ожидание:**
- Цена + показ ценности
- Социальное доказательство (кейс)
- Средний CTA (предложение обсудить)

### Тест 3: Горячий лид
Отправьте: "Хочу заказать консультацию"

**Ожидание:**
- Конкретная информация
- Сильный CTA (контакты, шаги)
- Создание срочности

### Тест 4: Возражение "дорого"
Отправьте: "Это дорого"

**Ожидание:**
- Переключение на ценность
- ROI и окупаемость
- Предложение бесплатной консультации

---

## Метрики успеха

Отслеживайте:

1. **Conversion Rate** - % клиентов оставивших контакт
2. **Engagement** - среднее количество сообщений
3. **Lead Distribution** - соотношение hot/warm/cold
4. **CTA Response** - отклик на призывы к действию

---

## Настройка под свой бизнес

### 1. Обновите FAQ
В `data/faq.json` добавьте:
- Реальные кейсы вашей компании
- Специфичные возражения вашей ниши
- Ваши УТП и преимущества

### 2. Настройте приоритет контактов
Отредактируйте `format_cta_options()` в `src/ai/prompts.py`:
- Если важен телефон - ставьте его первым
- Если Telegram - выделяйте его
- Если email - акцентируйте на нем

### 3. Адаптируйте стратегии
В константах `COLD/WARM/HOT_LEAD_STRATEGY` можете:
- Изменить агрессивность продаж
- Добавить специфичные техники вашей ниши
- Скорректировать тон общения

---

## Важные замечания

### Ollama

Для полноценной работы установите Ollama:
```bash
# Скачать: https://ollama.ai
ollama pull llama3.2:3b
# Или более мощную модель:
ollama pull mistral:7b
```

Без Ollama бот работает в fallback режиме (простой поиск по FAQ).

### Качество ответов

Зависит от модели:
- **llama3.2:3b** - быстро, хорошо для базовых диалогов
- **mistral:7b** - медленнее, но умнее и продает лучше
- **llama3:8b** - баланс скорости и качества

---

## Что дальше

### Рекомендации:

1. **Протестируйте** на реальных клиентах
2. **Соберите feedback** - понимают ли что делать?
3. **Настройте FAQ** под свой бизнес
4. **Анализируйте логи** - какие вопросы задают?
5. **Оптимизируйте промпты** - экспериментируйте

### Возможные доработки:

- Интеграция с CRM (сохранение лидов)
- Прием заявок прямо в боте
- A/B тестирование промптов
- Аналитика конверсий
- Автоматическая отправка лидов менеджеру

---

**Версия:** 0.3.0 - Smart Sales Assistant  
**Дата:** 12 февраля 2026  
**Статус:** ✅ Готово к использованию

**Попробуйте:** `@botunversal_bot` в Telegram
